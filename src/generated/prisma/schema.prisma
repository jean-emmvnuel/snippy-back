generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  email          String   @unique
  password       String
  createdAt      DateTime @default(now()) @map("created_at")
  id             Int      @id @default(autoincrement())
  nomUtilisateur String   @map("nom_utilisateur")
  role           Role     @default(USER)

  folders  Folder[]
  snippets Snippet[]
}

enum Role {
  USER
  ADMIN
}

model Folder {
  id        Int      @id @default(autoincrement())
  nom       String
  couleur   String
  createdAt DateTime @default(now()) @map("created_at")

  userId Int
  user   User @relation(fields: [userId], references: [id], onDelete: Cascade)

  snippets Snippet[]

  @@map("folders")
}

model Snippet {
  id          Int     @id @default(autoincrement())
  titre       String
  description String? @db.Text
  code        String  @db.Text
  langage     String
  isFavorite  Boolean @default(false)

  dossierId Int?
  folder    Folder? @relation(fields: [dossierId], references: [id], onDelete: SetNull)

  utilisateurId Int
  user          User @relation(fields: [utilisateurId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt

  @@map("snippets")
}
